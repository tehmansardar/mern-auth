(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{41:function(e,t,r){},43:function(e,t,r){},68:function(e,t,r){},69:function(e,t,r){"use strict";r.r(t);var a=r(0),s=r.n(a),c=r(20),n=r.n(c),i=(r(41),r(4)),o=r.n(i),u=r(8),j=(r(43),r(7)),l=r(14),b={LOGIN:"LOGIN",GET_TOKEN:"GET_TOKEN",GET_USER:"GET_USER"},d=r(9),O=r.n(d),p=function(){return{type:b.LOGIN}},h=function(){var e=Object(u.a)(o.a.mark((function e(t){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/user/infor",{headers:{Authorization:t}});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=r(1),m=function(){var e=Object(l.c)((function(e){return e.auth})),t=e.user,r=e.isLogged,a=function(){var e=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("/user/logout");case 3:localStorage.removeItem("firstLogin"),window.location.href("/"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),window.location.href="/";case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s={transform:r?"translateY(-5px)":0};return Object(f.jsxs)("header",{children:[Object(f.jsx)("div",{className:"logo",children:Object(f.jsx)("h1",{children:Object(f.jsx)(j.b,{to:"/",children:"AUTH"})})}),Object(f.jsxs)("ul",{style:s,children:[Object(f.jsx)("li",{children:Object(f.jsxs)(j.b,{to:"/",children:[Object(f.jsx)("i",{className:"fas fa-shopping-cart"}),"Cart"]})}),r?Object(f.jsxs)("li",{className:"drop-nav",children:[Object(f.jsxs)(j.b,{to:"#",className:"avatar",children:[Object(f.jsx)("img",{src:t.avatar,alt:""})," ",t.name," ",Object(f.jsx)("i",{className:"fas fa-angle-down"})]}),Object(f.jsxs)("ul",{className:"dropdown",children:[Object(f.jsx)("li",{children:Object(f.jsx)(j.b,{to:"/profile",children:"Profile"})}),Object(f.jsx)("li",{children:Object(f.jsx)(j.b,{to:"/",onClick:a,children:"Logout"})})]})]}):Object(f.jsx)("li",{children:Object(f.jsxs)(j.b,{to:"/login",children:[Object(f.jsx)("i",{className:"fas fa-user"})," Sign in"]})})]})]})},x=r(5),v=r(6),g=r(2),w=r(16),_=(r(68),function(e){return Object(f.jsx)("div",{className:"errMsg",children:e})}),y=function(e){return Object(f.jsx)("div",{className:"successMsg",children:e})},E={email:"",password:"",err:"",success:""},N=function(){var e=Object(a.useState)(E),t=Object(w.a)(e,2),r=t[0],s=t[1],c=r.email,n=r.password,i=r.err,b=r.success,d=Object(l.b)(),h=Object(x.f)(),m=function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(g.a)(Object(g.a)({},r),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},N=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,O.a.post("/user/login",{email:c,password:n});case 4:a=e.sent,s(Object(g.a)(Object(g.a)({},r),{},{err:"",success:a.data.msg})),localStorage.setItem("firstLogin",!0),d(p()),h.push("/"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},r),{},{err:e.t0.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"login_page",children:[Object(f.jsx)("h2",{children:"Login"}),i&&_(i),b&&y(b),Object(f.jsxs)("form",{onSubmit:N,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(f.jsx)("input",{type:"text",placeholder:"Email",id:"email",name:"email",value:c,onChange:m})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",placeholder:"Password",id:"password",name:"password",value:n,onChange:m})]}),Object(f.jsxs)("div",{className:"row",children:[Object(f.jsx)("button",{type:"submit",children:"Login"}),Object(f.jsx)(j.b,{to:"/forgot_password",children:"Forgot Passowrd?"})]})]}),Object(f.jsxs)("p",{children:["Don't have account? ",Object(f.jsx)(j.b,{to:"/register",children:"Register"})]})]})},k=function(e){return!e},S=function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)},L=function(e){return e.length<6},C=function(e,t){return e===t},T={name:"",email:"",password:"",cf_password:"",err:"",success:""},P=function(){var e=Object(a.useState)(T),t=Object(w.a)(e,2),r=t[0],s=t[1],c=r.name,n=r.email,i=r.password,l=r.cf_password,b=r.err,d=r.success,p=function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(g.a)(Object(g.a)({},r),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},h=function(){var e=Object(u.a)(o.a.mark((function e(t){var a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!k(c)&&!k(i)){e.next=3;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Please fill in all fields",success:""})));case 3:if(S(n)){e.next=5;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Invalid email",success:""})));case 5:if(!L(i)){e.next=7;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Password must be atleast 6 characters",success:""})));case 7:if(C(i,l)){e.next=9;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Password didn't match",success:""})));case 9:return e.prev=9,e.next=12,O.a.post("/user/register",{name:c,email:n,password:i});case 12:a=e.sent,s(Object(g.a)(Object(g.a)({},r),{},{err:"",success:a.data.msg})),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(9),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},r),{},{err:e.t0.response.data.msg,success:""}));case 19:case"end":return e.stop()}}),e,null,[[9,16]])})));return function(t){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"login_page",children:[Object(f.jsx)("h2",{children:"Register"}),b&&_(b),d&&y(d),Object(f.jsxs)("form",{onSubmit:h,children:[Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"name",children:"Name"}),Object(f.jsx)("input",{type:"text",placeholder:"Name",id:"name",name:"name",value:c,onChange:p})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"email",children:"Email Address"}),Object(f.jsx)("input",{type:"text",placeholder:"Email",id:"email",name:"email",value:n,onChange:p})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"password",children:"Password"}),Object(f.jsx)("input",{type:"password",placeholder:"Password",id:"password",name:"password",value:i,onChange:p})]}),Object(f.jsxs)("div",{children:[Object(f.jsx)("label",{htmlFor:"cf_password",children:"Confirm Password"}),Object(f.jsx)("input",{type:"password",placeholder:"Confirm password",id:"cf_password",name:"cf_password",value:l,onChange:p})]}),Object(f.jsx)("div",{className:"row",children:Object(f.jsx)("button",{type:"submit",children:"Register"})})]}),Object(f.jsxs)("p",{children:["Already have account? ",Object(f.jsx)(j.b,{to:"/login",children:"Login"})]})]})},F=function(){var e=Object(x.g)().activation_token,t=Object(a.useState)(""),r=Object(w.a)(t,2),s=r[0],c=r[1],n=Object(a.useState)(""),i=Object(w.a)(n,2),j=i[0],l=i[1];return Object(a.useEffect)((function(){e&&function(){var t=Object(u.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,O.a.post("/user/activation",{activation_token:e});case 3:r=t.sent,l(r.data.msg),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),t.t0.response.data.msg&&c(t.t0.response.data.msg);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()()}),[]),Object(f.jsxs)("div",{className:"active_page",children:[s&&_(s),j&&y(j)]})},A=function(){return Object(f.jsx)("div",{children:"404 | Not Found"})},I={email:"",err:"",success:""},G=function(){var e=Object(a.useState)(I),t=Object(w.a)(e,2),r=t[0],s=t[1],c=r.email,n=r.err,i=r.success,j=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(S(c)){e.next=2;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Invalid email",success:""})));case 2:return e.prev=2,e.next=5,O.a.post("/user/forgot",{email:c});case 5:return t=e.sent,e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"",success:t.data.msg})));case 9:e.prev=9,e.t0=e.catch(2),e.t0.response.data.msg&&s(Object(g.a)(Object(g.a)({},r),{},{err:e.t0.response.data.msg,success:""}));case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"fg_pass",children:[Object(f.jsx)("h2",{children:"Forgot Password?"}),Object(f.jsxs)("div",{className:"row",children:[n&&_(n),i&&y(i),Object(f.jsx)("label",{htmlFor:"email",children:"Enter your email address"}),Object(f.jsx)("input",{type:"email",name:"email",id:"email",value:c,onChange:function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(g.a)(Object(g.a)({},r),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))}}),Object(f.jsx)("button",{onClick:j,children:"Verify your email"})]})]})},R={password:"",cf_password:"",err:"",success:""},D=function(){var e=Object(a.useState)(R),t=Object(w.a)(e,2),r=t[0],s=t[1],c=r.password,n=r.cf_password,i=r.err,j=r.success,l=Object(x.g)().token,b=function(e){var t,a=e.target,c=a.name,n=a.value;s(Object(g.a)(Object(g.a)({},r),{},(t={},Object(v.a)(t,c,n),Object(v.a)(t,"err",""),Object(v.a)(t,"success",""),t)))},d=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!L(c)){e.next=2;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Password must be atleast 6 characters",success:""})));case 2:if(C(c,n)){e.next=4;break}return e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"Password did not match",success:""})));case 4:return e.prev=4,e.next=7,O.a.post("/user/reset",{password:c},{headers:{Authorization:l}});case 7:return t=e.sent,e.abrupt("return",s(Object(g.a)(Object(g.a)({},r),{},{err:"",success:t.data.msg})));case 11:e.prev=11,e.t0=e.catch(4),i.response.data.msg&&s(Object(g.a)(Object(g.a)({},r),{},{err:i.response.data.msg,success:""}));case 14:case"end":return e.stop()}}),e,null,[[4,11]])})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:"fg_pass",children:[Object(f.jsx)("h2",{children:"Forgot Password?"}),Object(f.jsxs)("div",{className:"row",children:[i&&_(i),j&&y(j),Object(f.jsx)("label",{htmlFor:"email",children:"Enter new Password"}),Object(f.jsx)("input",{type:"password",name:"password",id:"password",value:c,onChange:b}),Object(f.jsx)("label",{htmlFor:"email",children:"Confirm new Password"}),Object(f.jsx)("input",{type:"password",name:"cf_password",id:"cf_password",value:n,onChange:b}),Object(f.jsx)("button",{onClick:d,children:"Verify your email"})]})]})},U=function(){var e=Object(l.c)((function(e){return e.auth})).isLogged;return Object(f.jsx)("section",{children:Object(f.jsxs)(x.c,{children:[Object(f.jsx)(x.a,{path:"/login",component:e?A:N,exact:!0}),Object(f.jsx)(x.a,{path:"/register",component:e?A:P,exact:!0}),Object(f.jsx)(x.a,{path:"/forgot_password",component:e?A:G,exact:!0}),Object(f.jsx)(x.a,{path:"/user/reset/:token",component:e?A:D,exact:!0}),Object(f.jsx)(x.a,{path:"/user/activate/:activation_token",component:F,exact:!0})]})})};var z=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.token})),r=Object(l.c)((function(e){return e.auth}));return Object(a.useEffect)((function(){localStorage.getItem("firstLogin")&&function(){var t=Object(u.a)(o.a.mark((function t(){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O.a.post("/user/refresh_token",null);case 2:r=t.sent,e({type:"GET_TOKEN",payload:r.data.access_token});case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()()}),[r.isLogged,e]),Object(a.useEffect)((function(){if(t){e(p()),h(t).then((function(t){e(function(e){return{type:b.GET_USER,payload:{user:e.data,isAdmin:1===e.data.role}}}(t))}))}}),[t]),Object(f.jsx)(j.a,{children:Object(f.jsxs)("div",{className:"App",children:[Object(f.jsx)(m,{}),Object(f.jsx)(U,{})]})})},K=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,70)).then((function(t){var r=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,n=t.getTTFB;r(e),a(e),s(e),c(e),n(e)}))},V=r(18),X={user:[],isLogged:!1,isAdmin:!1},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.LOGIN:return Object(g.a)(Object(g.a)({},e),{},{isLogged:!0});case b.GET_USER:return Object(g.a)(Object(g.a)({},e),{},{user:t.payload.user,isAdmin:t.payload.isAdmin});default:return e}},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b.GET_TOKEN:return t.payload;default:return e}},J=Object(V.b)({auth:M,token:B}),Z=Object(V.c)(J,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());var H=function(e){var t=e.children;return Object(f.jsx)(l.a,{store:Z,children:t})};n.a.render(Object(f.jsx)(s.a.StrictMode,{children:Object(f.jsx)(H,{children:Object(f.jsx)(z,{})})}),document.getElementById("root")),K()}},[[69,1,2]]]);
//# sourceMappingURL=main.5a4d5535.chunk.js.map